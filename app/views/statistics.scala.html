@(stats: play.api.libs.json.JsValue)

@import helpers.Utils
@import play.api.libs.json.{JsValue, JsUndefined}

<section id="statistics" class="section-grey">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
          <div id="monitor" class="panel panel-default tab-box">
            <div class="panel-body">
              <div class="tab-content">
                <div id="fuel-tab" class="tab-pane active">
                  <div class="row">
                    <div class="col-sm-12 chart">
                      <div id="diaspora-stats"></div>
                    </div>
                  </div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script src="@routes.Assets.at("javascripts/raphael-min.js")"></script>
<script src="@routes.Assets.at("javascripts/morris.min.js")"></script>
<script>
  $(function () {
    Morris.Bar({
      element: 'diaspora-stats',
      data: [{
        y: 'Sechat.org',
        a: @(Utils.printSafelyJson((stats \ "sechat" \ "total_users"))),
        b: @(Utils.printSafelyJson((stats \ "sechat" \ "active_users_halfyear"))),
        c: @(Utils.printSafelyJson((stats \ "sechat" \ "active_users_monthly")))
      },
      {
        y: 'Joindiaspora.com',
        a: @(Utils.printSafelyJson((stats \ "joindiaspora" \ "total_users"))),
        b: @(Utils.printSafelyJson((stats \ "joindiaspora" \ "active_users_halfyear"))),
        c: @(Utils.printSafelyJson((stats \ "joindiaspora" \ "active_users_monthly")))
      }],
      xkey: 'y',
      ykeys: ['a', 'b', 'c'],
      labels: ['Total user', 'Active half-yearly', 'Active monthly'],
      barColors: ['#A52A2A','#000000','#72A0C1']
    });
  });
</script>
